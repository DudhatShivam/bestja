<openerp>
    <data>
        <record model="ir.actions.act_window" id="action_list_offers">
            <field name="name">Oferty</field>
            <field name="res_model">offer</field>
            <field name="view_mode">tree,form</field>
            <field name="context" eval="{'search_default_current': True}" />
        </record>

        <record model="ir.actions.act_window" id="action_list_offers_templates">
            <field name="name">Szablony ofert</field>
            <field name="res_model">offer</field>
            <field name="view_mode">tree,form</field>
            <field name="context" eval="{'search_default_template': True}" />
        </record>

        <record model="ir.ui.view" id="bestja_offer_form">
            <field name="name">bestja.offer.form</field>
            <field name="model">offer</field>
            <field name="priority" eval="5"/>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="set_published" string="opublikuj" states="unpublished" type="object" class="oe_highlight"/>
                        <button name="set_unpublished" string="wstrzymaj rekrutację" states="published" type="object" class="oe_highlight"/>

                        <button name="set_template" string="Ustaw jako szablon" type="object" states="unpublished"/>
                        <button string="Nowa oferta w oparciu o szablon" name="duplicate_template"  type="object" states="template" class="oe_highlight"/>
                        <button name="set_open" string="Przywróc jako ofertę" type="object" states="template"/>
                    </header>
                    <field name="image" widget="image" class="oe_left"/>
                    <div class="oe_title">
                        <h1 class="oe_inline" style="display: inline">
                            <field name="name" class="oe_inline"/>
                        </h1>
                        <span class="oe_grey oe_edit_only">Nadaj ofercie atrakcyjną, przyciągającą uwagę nazwę.</span>
                        <field name="state" readonly="1" class="state_inactive"/>
                    </div>
                    <group>
                        <field name="vacancies"/>
                        <label for="project"/>
                        <div><field name="project" class="oe_inline"/> <span class="oe_grey oe_edit_only">Wybierz lub utwórz nowy projekt</span></div>
                        <label for="manager"/>
                        <div><field name="manager" class="oe_inline"/> <span class="oe_grey oe_edit_only">Wybierz osobę odpowiedzialną za akcję</span></div>
                    </group>
                    <notebook colspan="4">
                        <page string="Umiejętności">
                            <separator string="Umiejętności" class="oe_inline"  style="display: inline"/>
                            <span class="oe_grey oe_edit_only">Wybierz umiejętności jakie powinien posiadać wolontariusz (max. <span id="max_skills"/> umiejętności)</span>
                            <field name="skills" widget="many2many_checkboxes"/>
                            <separator string="Uprawienia" class="oe_inline"/>
                            <span class="oe_grey oe_edit_only">Wybierz uprawnienia jeżeli są wymagane</span>
                            <div>
                                <label for="drivers_license"/><field name="drivers_license" class="oe_inline"/><br/>
                                <field name="sanepid"/><label for="sanepid"/><br/>
                                <field name="forklift"/><label for="forklift"/>
                            </div>
                        </page>
                        <page string="Obszar działania">
                            <separator string="Obszar działania" class="oe_inline"/>
                            <span class="oe_grey oe_edit_only">Wybierz czym będzie zajmował się wolontariusz (max. <span id="max_wishes"/> obszary)</span>
                            <field name="wishes" widget="many2many_checkboxes"/>
                        </page>
                        <page string="Opis akcji">
                            <label for="target_group"/>
                            <field name="target_group" widget="many2many_tags"/>
                            <label for="desc_aim"/>
                            <field name="desc_aim" placeholder="Opisz w skrócie czym będzie zajmował się wolontariusz"/>
                            <label for="desc_expectations"/>
                            <field name="desc_expectations" placeholder="Jakie będą oczekiwania wobec wolontariusza?"/>
                            <label for="desc_why"/>
                            <field name="desc_why" placeholder="Opisz dlaczego wolontariusz miałby zaangażować się w tę akcję."/>
                            <label for="desc_benefits"/>
                            <field name="desc_benefits" placeholder="Opisz czego nauczy się, jakie zdobędzie kwalifikacje, doświadczenia."/>
                            <label for="helpee_group"/>
                            <field name="helpee_group" widget="many2many_tags"/>
                            <label for="desc_tools"/>
                            <field name="desc_tools" placeholder="np. napoje, koszulki, przyrządy ogrodnicze."/>
                            <label for="desc_comments"/>
                            <field name="desc_comments" placeholder="Wpisz jeśli masz uwagi lub dodatkowe wymagania."/>
                        </page>
                        <page string="Termin akcji">
                            <field name="durations"/>
                        </page>
                        <page string="Miejsce akcji">
                            <widget type="google_maps.coordinates"/>
                            <separator/>
                            <group>
                                <field name="district" class="oe_inline"/>
                                <field name="city" class="oe_inline"/>
                                <field name="latitude" class="coordinate_fields"/> 
                                <field name="longitude" class="coordinate_fields"/>
                                <field name="latitude" readonly="1"/>
                                <field name="longitude" readonly="1"/>
                            </group>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="bestja_offer_tree">
            <field name="name">bestja.offer.tree</field>
            <field name="model">offer</field>
            <field name="priority" eval="5"/>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="project"/>
                    <field name="manager"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="bestja_offer_search">
            <field name="name">bestja.offer.search</field>
            <field name="model">offer</field>
            <field name="priority" eval="5"/>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="project"/>
                    <field name="manager"/>
                    <filter name="current" string="Opublikowane"
                                domain="[('state', '=', 'published')]"/>
                    <filter name="template" string="Szablony"
                                domain="[('state', '=', 'template')]"/>
                    <group string="Group By">
                        <filter name="group_by_resposible" string="Projekt"
                                context="{'group_by': 'project'}"/>
                        <filter name="group_by_resposible" string="Stan"
                                context="{'group_by': 'state'}"/>
                        <filter name="group_by_resposible" string="Opiekun oferty"
                                context="{'group_by': 'manager'}"/>
                    </group>
                </search>
            </field>
        </record>
    </data>
</openerp>
